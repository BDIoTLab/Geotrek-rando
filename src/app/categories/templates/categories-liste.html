<ul class="categories">
    <li ng-repeat="category in categories | orderBy: 'order' track by category.id" class="category {{category.cat_class}}" ng-class="{active : category.active, open: category.open}" ng-id="cat-{{category.id}}">
        <a href ng-click="toggleDisplayCategory(category)">
            <ng-include ng-if="isSVG(category.pictogram)" src="category.pictogram"></ng-include>
            <img ng-if="!isSVG(category.pictogram)" src="{{::category.pictogram}}">
        </a>
        <div class="filters">
            <form>
                <div class="category-name" ng-click="toggleCategory(category)">
                    <i ng-if="category.active" class="fa fa-check-circle-o"></i>
                    <span>{{::category.label}}</span>
                </div>

                <div ng-if="category.type1 && category.type1.values.length > 0" class="category-item selector type1" ng-class="{empty: category.type1.values.length === 0, opened: type1IsCollapsed}">
                    <span class="item-title" ng-click="type1IsCollapsed = !type1IsCollapsed"><i class="fa fa-angle-right"></i> {{::category.type1_label}}</span>
                    <div class="choices" collapse="!type1IsCollapsed">
                        <div ng-repeat="type1 in category.type1.values" class="type1 form-group">
                            <input type="checkbox" id="type1-{{::type1.id}}" value="{{::type1.id}}" ng-model="category.filters.type1[type1.id]"  ng-change="filterChange(category)"/>
                            <label for="type1-{{::type1.id}}">
                                <span ng-if="type1.name">{{::type1.name}}</span>
                                <span ng-if="type1.label">{{::type1.label}}</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div ng-if="category.type2 && category.type2.values.length > 0" class="category-item selector type2" ng-class="{empty: category.type2.values.length === 0, opened: type2IsCollapsed}">
                    <span class="item-title" ng-click="type2IsCollapsed = !type2IsCollapsed"><i class="fa fa-angle-right"></i> {{::category.type2_label}}</span>
                    <div class="choices" collapse="!type2IsCollapsed">
                        <div ng-repeat="type2 in category.type2.values" class="type2 form-group">
                            <input type="checkbox" id="type2-{{::type2.id}}" value="{{::type2.id}}" ng-model="category.filters.type2[type2.id]"  ng-change="filterChange(category)"/>
                            <label for="type2-{{type2.id}}">
                                <span ng-if="type2.name">{{::type2.name}}</span>
                                <span ng-if="type2.label">{{::type2.label}}</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div ng-if="category.routes && category.routes.values.length > 0" class="category-item selector routes" ng-class="{opened: routeIsCollapsed}">
                    <span ng-click="routeIsCollapsed = !routeIsCollapsed"><i class="fa fa-angle-right"></i> {{'ROUTES' | translate}}</span>
                    <div class="choices" collapse="!routeIsCollapsed">
                        <div ng-repeat="route in category.routes.values" class="route form-group">
                            <input type="checkbox" id="route-{{::route.id}}" value="{{::route.id}}" ng-model="category.filters.route[route.id]"  ng-change="filterChange(category)"/>
                            <label for="route-{{::route.id}}">
                                <ng-include src="route.pictogram"></ng-include>
                                <span>{{::route.label}}</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div ng-if="category.difficulty && category.difficulty.values.length > 1" class="category-item slider difficulties">
                    <div class="item-title">
                        <i class="fa fa-angle-right"></i>
                        <span>{{'DIFFICULTIES' | translate}}</span>
                        <span ng-if="category.difficulty.min === 0 && category.difficulty.max === category.difficulty.values.length - 1">
                            {{'ALL' | translate}}
                        </span>
                        <span ng-if="(category.difficulty.min !== 0 || category.difficulty.max !== category.difficulty.values.length - 1) && category.difficulty.min !== category.difficulty.max">
                            {{category.difficulty.values[category.difficulty.min].label}} -> {{category.difficulty.values[category.difficulty.max].label}}
                        </span>
                        <span ng-if="category.difficulty.min === category.difficulty.max">
                            {{category.difficulty.values[category.difficulty.min].label}}
                        </span>
                    </div>
                    <div class="slider-container">
                        <slider ng-model-low="category.difficulty.min" ng-model-high="category.difficulty.max" floor="0" ceiling="{{::category.difficulty.values.length - 1}}" step="1"></slider>
                        <label class="min-label">{{::category.difficulty.values[0].label}}</label>
                        <label class="max-label">{{::category.difficulty.values[category.difficulty.values.length - 1].label}}</label>
                    </div>
                </div>

                <div ng-if="category.duration && category.duration.values.length > 1" class="category-item slider duration">
                    <div class="item-title">
                        <i class="fa fa-angle-right"></i>
                        <span>{{'DURATION' | translate}}</span>
                        <span ng-if="category.duration.min === 0 && category.duration.max === category.duration.values.length - 1">
                            {{'ALL' | translate}}
                        </span>
                        <span ng-if="(category.duration.min !== 0 || category.duration.max !== category.duration.values.length - 1) && category.duration.min !== category.duration.max">
                            {{category.duration.values[category.duration.min].label}} -> {{category.duration.values[category.duration.max].label}}
                        </span>
                        <span ng-if="category.duration.min === category.duration.max">
                            {{category.duration.values[category.duration.min].label}}
                        </span>
                    </div>
                    <div class="slider-container">
                        <slider ng-model-low="category.duration.min" ng-model-high="category.duration.max" floor="0" ceiling="{{::category.duration.values.length - 1}}" step="1"></slider>
                        <label class="min-label">{{::category.duration.values[0].label}}</label>
                        <label class="max-label">{{::category.duration.values[category.duration.values.length - 1].label}}</label>
                    </div>
                </div>

                <div ng-if="category.ascent && category.ascent.values.length > 1" class="category-item slider ascent">
                    <div class="item-title">
                        <i class="fa fa-angle-right"></i>
                        <span>{{'ASCENT' | translate}}</span>
                        <span ng-if="category.ascent.min === 0 && category.ascent.max === category.ascent.values.length - 1">
                            {{'ALL' | translate}}
                        </span>
                        <span ng-if="(category.ascent.min !== 0 || category.ascent.max !== category.ascent.values.length - 1) && category.ascent.min !== category.ascent.max">
                            {{category.ascent.values[category.ascent.min].label}} -> {{category.ascent.values[category.ascent.max].label}}
                        </span>
                        <span ng-if="category.ascent.min === category.ascent.max">
                            {{category.ascent.values[category.ascent.min].label}}
                        </span>
                    </div>
                    <div class="slider-container">
                        <slider ng-model-low="category.ascent.min" ng-model-high="category.ascent.max" floor="0" ceiling="{{::category.ascent.values.length - 1}}" step="1"></slider>
                        <label class="min-label">{{::category.ascent.values[0].label}}</label>
                        <label class="max-label">{{::category.ascent.values[category.ascent.values.length - 1].label}}</label>
                    </div>
                </div>

                <div ng-if="category.eLength && category.eLength.values.length > 1" class="category-item slider eLength">
                    <div class="item-title">
                        <i class="fa fa-angle-right"></i>
                        <span>{{'LENGTH' | translate}}</span>
                        <span ng-if="category.eLength.min === 0 && category.eLength.max === category.eLength.values.length - 1">
                            {{'ALL' | translate}}
                        </span>
                        <span ng-if="(category.eLength.min !== 0 || category.eLength.max !== category.eLength.values.length - 1) && category.eLength.min !== category.eLength.max">
                            {{category.eLength.values[category.eLength.min].label}} -> {{category.eLength.values[category.eLength.max].label}}
                        </span>
                        <span ng-if="category.eLength.min === category.eLength.max">
                            {{category.eLength.values[category.eLength.min].label}}
                        </span>
                    </div>
                    <div class="slider-container">
                        <slider ng-model-low="category.eLength.min" ng-model-high="category.eLength.max" floor="0" ceiling="{{::category.eLength.values.length - 1}}" step="1"></slider>
                        <label class="min-label">{{::category.eLength.values[0].label}}</label>
                        <label class="max-label">{{::category.eLength.values[category.eLength.values.length - 1].label}}</label>
                    </div>
                </div>
            </form>
        </div>
    </li>
</ul>