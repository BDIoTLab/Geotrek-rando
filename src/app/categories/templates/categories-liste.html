<ul class="categories">
    <li ng-repeat="category in categories" class="category {{category.cat_class}}" ng-class="{active : category.active}" ng-id="cat-{{category.id}}">
        <button ng-click="toggleCategory(category)">
            <ng-include src="category.pictogram"></ng-include>
            <span class="sr-only">{{category.label}}</span>
        </button>
        <div class="filters">
            <div class="category-name">
                <span>{{category.label}}</span>
            </div>
            <form>
                <div ng-if="category.type1 && category.type1.length > 0" class="selector type1" ng-class="{empty: category.type1.length === 0}">
                    <span>{{category.type1_label}} <i class="caret"></i></span>
                    <div class="choices">
                        <div ng-repeat="type1 in category.type1" class="type1 form-group">
                            <input type="checkbox" id="type1-{{type1.id}}" value="{{type1.id}}" ng-model="category.filters.type1[type1.id]"  ng-change="propagateFilters()"/>
                            <label for="type1-{{type1.id}}">
                                <span ng-if="type1.name">{{type1.name}}</span>
                                <span ng-if="type1.label">{{type1.label}}</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div ng-if="category.type2 && category.type2.length > 0" class="selector type2" ng-class="{empty: category.type2.length === 0}">
                    <span>{{category.type2_label}} <i class="caret"></i></span>
                    <div class="choices">
                        <div ng-repeat="type2 in category.type2" class="type2 form-group">
                            <input type="checkbox" id="type2-{{type2.id}}" value="{{type2.id}}" ng-model="category.filters.type2[type2.id]"  ng-change="propagateFilters()"/>
                            <label for="type2-{{type2.id}}">
                                <span ng-if="type2.name">{{type2.name}}</span>
                                <span ng-if="type2.label">{{type2.label}}</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div ng-if="category.routes && category.routes.length > 0" class="selector routes">
                    <span>Parcours <i class="caret"></i></span>
                    <div class="choices">
                        <div ng-repeat="route in category.routes" class="route form-group">
                            <input type="checkbox" id="route-{{route.id}}" value="{{route.id}}" ng-model="category.filters.route[route.id]"  ng-change="propagateFilters()"/>
                            <label for="route-{{route.id}}">
                                <ng-include src="route.pictogram"></ng-include>
                                <span>{{route.label}}</span>
                            </label>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </li>
</ul>