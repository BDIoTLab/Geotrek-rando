<section class="detail-page category-{{result.properties.category.id}}" ng-class="{'showMap': $root.mapIsShown}">
    <div class="informations">

        <div class="header">
            <div class="element-title">
                <div class="cat-icon">
                    <ng-include ng-if="isSVG(result.properties.category.pictogram)" src="result.properties.category.pictogram"></ng-include>
                    <img ng-if="!isSVG(result.properties.category.pictogram)" ng-src="{{result.properties.category.pictogram}}" ng-alt="{{result.properties.category.label}}">
                </div>
                <h1>{{result.properties.name}}</h1>
            </div>
        </div>

        <div class="main-infos">
            <div class="intro">
                <div class="ambiance-and-teaser">
                    <div ng-if="result.properties.description_teaser" class="description_teaser">
                        <i class="fa fa-quote-left"></i>
                        <div ng-bind-html="sanitizeData(result.properties.description_teaser)"></div>
                    </div>
                    <div ng-if="result.properties.ambiance" ng-bind-html="sanitizeData(result.properties.ambiance)" class="ambiance"></div>
                </div>
                <div class="pictures">
                    <div class="main-visual">
                        <img ng-src="{{result.properties.pictures[0].url}}" ng-alt="{{result.properties.pictures[0].legend}}">
                        <div class="picture-credit">
                            {{result.properties.pictures[0].author}}
                        </div>
                    </div>
                    <ul ng-if="result.properties.pictures.length > 1">
                        <li ng-repeat="picture in result.properties.pictures" ng-click="showLightbox($index)">
                            <img ng-src="{{picture.url}}" ng-alt="{{picture.title}}">
                        </li>
                    </ul>
                </div>
                <div class="text">
                    <div class="pictos">
                        <ul>
                            <li ng-if="result.properties.type1[0]" ng-repeat="currentType in result.properties.type1" class="type1">
                                <div>
                                    <ng-include ng-if="currentType.pictogram && isSVG(currentType.pictogram)" src="currentType.pictogram"></ng-include>
                                    <img ng-if="currentType.pictogram && !isSVG(currentType.pictogram)" ng-src="{{currentType.pictogram}}" ng-alt="{{currentType.name}}">
                                    <span>{{currentType.name}}</span>
                                </div>
                            </li>
                            <li ng-if="result.properties.type2[0]" ng-repeat="currentType2 in result.properties.type2" class="type2">
                                <div>
                                    <ng-include ng-if="currentType2.pictogram && isSVG(currentType2.pictogram)" src="currentType2.pictogram"></ng-include>
                                    <img ng-if="currentType2.pictogram && !isSVG(currentType2.pictogram)" ng-src="{{currentType2.pictogram}}" ng-alt="{{currentType2.name}}">
                                    <span>{{currentType2.name}}</span>
                                </div>
                            </li>
                            <li ng-if="result.properties.duration_pretty" class="duration">
                                <div>
                                    <ng-include src="'./images/icons/duration.svg'"></ng-include>
                                    <span>{{result.properties.duration_pretty}}</span>
                                </div>
                            </li>
                            <li ng-if="result.properties.difficulty.label" class="difficulty">
                                <div>
                                    <ng-include ng-if="result.properties.difficulty.pictogram && isSVG(result.properties.difficulty.pictogram)" src="result.properties.difficulty.pictogram"></ng-include>
                                    <img ng-if="result.properties.difficulty.pictogram && !isSVG(result.properties.difficulty.pictogram)" ng-src="{{result.properties.difficulty.pictogram}}" ng-alt="{{result.properties.difficulty.label}}">
                                    <span>{{result.properties.difficulty.label}}</span>
                                </div>
                            </li>
                            <li ng-if="result.properties.route" class="route">
                                <div>
                                    <ng-include ng-if="result.properties.route.pictogram && isSVG(result.properties.route.pictogram)" src="result.properties.route.pictogram"></ng-include>
                                    <img ng-if="result.properties.route.pictogram && !isSVG(result.properties.route.pictogram)" ng-src="{{result.properties.route.pictogram}}" ng-alt="{{result.properties.route.label}}">
                                    <span>{{result.properties.route.label}}</span>
                                </div>
                            </li>
                            <li ng-if="result.properties.length" class="length">
                                <div>
                                    <ng-include src="'./images/icons/length.svg'"></ng-include>
                                    <span>{{parseLength(result.properties.length)}}</span>
                                </div>
                            </li>
                            <li ng-if="result.properties.ascent" class="ascent">
                                <div>
                                    <ng-include src="'./images/icons/ascent.svg'"></ng-include>
                                    <span>{{parseLength(result.properties.ascent)}}</span>
                                </div>
                            </li>
                            <li ng-if="result.properties.networks" ng-repeat="network in result.properties.networks" class="network {{removeDiacritics(network.name)}}">
                                <div>
                                    <ng-include ng-if="network.pictogram && isSVG(network.pictogram)" src="network.pictogram"></ng-include>
                                    <img ng-if="network.pictogram && !isSVG(network.pictogram)" ng-src="{{network.pictogram}}" alt="network.name">
                                    <span>{{network.name}}</span>
                                </div>
                            </li>
                            <li ng-if="result.properties.themes" ng-repeat="theme in result.properties.themes" class="theme {{removeDiacritics(theme.label)}}">
                                <div>
                                    <ng-include ng-if="theme.pictogram &&isSVG(theme.pictogram)" src="theme.pictogram"></ng-include>
                                    <img ng-if="theme.pictogram && !isSVG(theme.pictogram)" ng-src="{{theme.pictogram}}" ng-alt="{{theme.label}}">
                                    <span>{{theme.label}}</span>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="from-to">
                        <span ng-if="result.properties.departure && result.properties.departure !== result.properties.arrival">{{ 'START' | translate}} {{result.properties.departure}}</span>
                        <span ng-if="result.properties.arrival">
                            <span ng-if="result.properties.departure !== result.properties.arrival" class="arrival">
                                {{ 'ARRIVAL' | translate}}
                            </span>
                            <span ng-if="result.properties.departure === result.properties.arrival" class="loop">
                                {{ 'LOOP' | translate}}
                            </span>
                            {{result.properties.arrival}}
                        </span>
                        <span ng-if="!result.properties.departure && !result.properties.arrival && result.properties.cities[0]">
                            Lieux : {{result.properties.cities[0].name}}
                        </span>
                    </div>
                </div>
            </div>
            <div class="element-description">
                <div ng-if="result.properties.description" ng-bind-html="sanitizeData(result.properties.description)" class="description"></div>
                <div ng-if="result.properties.is_park_centered" class="is-park-centered">
                    <i class="fa fa-info-circle"></i>
                    <p>{{ 'PARK_CENTERED' | translate}}</p>
                </div>
                <div ng-if="result.properties.advice" class="advice">
                    <i class="fa fa-exclamation-triangle"></i>
                    <div ng-bind-html="sanitizeData(result.properties.advice)"></div>
                </div>
                <div ng-if="result.properties.altimetric_profile" class="profile">
                            
                </div>
                <div ng-if="result.properties.disabled_infrastructure" class="disabled-infrastructure">
                    <i class="fa fa-wheelchair"></i>
                    <div ng-bind-html="sanitizeData(result.properties.disabled_infrastructure)"></div>
                </div>
            </div>
            <div class="more-infos">
                <div ng-if="result.properties.public_transport" class="transport">
                    <h3><i class="fa fa-bus"></i>{{ 'TRANSPORTS' | translate}}</h3>
                    <div class="card" ng-bind-html="sanitizeData(result.properties.public_transport)"></div>
                </div>
                <div ng-if="result.properties.access" class="access">
                    <h3><i class="fa fa-road"></i>{{ 'ACCESS' | translate}}</h3>
                    <div class="card" ng-bind-html="sanitizeData(result.properties.access)"></div>
                </div>
                <div ng-if="result.properties.information_desks[0]" class="info-desks">
                    <h3><i class="fa fa-tty"></i>{{ 'INFORMATION_DESKS' | translate}}</h3>
                    <ul>
                        <li ng-repeat="desk in result.properties.information_desks" class="desk card">
                            <div class="infos">
                                <div class="image">
                                    <img ng-src="{{desk.photo_url}}" alt="{{desk.name}}"/>
                                </div>
                                <div class="contact">
                                    <div class="name">{{desk.name}}</div>
                                    <div class="address">
                                        <div class="street">
                                            {{desk.street}}
                                        </div>
                                        <span>{{desk.postal_code}}</span>
                                        <span>{{desk.municipality}}</span>
                                    </div>
                                    <a ng-if="desk.website" class="website" href="{{desk.website}}">Site web</a>
                                    <a ng-if="desk.email" class="mail" href="mailto:{{desk.email}}">{{desk.email}}</a>
                                    <a ng-if="desk.phone" class="phone" href="tel:{{desk.phone}}">{{desk.phone}}</a>
                                </div>
                            </div>
                            <div class="description">
                                <div class="text" ng-bind-html="sanitizeData(desk.description)"></div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div ng-if="result.properties.contact || result.properties.email" class="contact-card">
                    <h3><i class="fa fa-tty"></i>{{ 'CONTACT' | translate}}</h3>
                    <div class="card">
                        <div class="contact" ng-if="result.properties.contact" ng-bind-html="sanitizeData(result.properties.contact)"></div>
                        <a ng-if="result.properties.email" href="mailto:{{result.properties.email}}">{{result.properties.email}}</a>
                    </div>
                </div>

                <div ng-if="pois.length > 0 || result.properties.touristic_contents.length > 0 || result.properties.touristic_events.length > 0 || result.properties.treks.length > 0" class="interests">
                    <div class="pois" ng-if="pois.length > 0" ng-class="{collapsed: !poisAreShown}">
                        <h3 ng-click="togglePois()">{{'POI' | translate}} <i class="fa fa-angle-down"></i></h3>
                        <div class="collapsor">
                            <pois-liste></pois-liste>
                        </div>
                    </div>
                    <div class="near-elements" ng-if="result.properties.touristic_contents.length > 0 || result.properties.touristic_events.length > 0 || result.properties.treks.length > 0" ng-class="{collapsed: poisAreShown}">
                        <h3 ng-click="togglePois()">{{'NEAR' | translate}} <i class="fa fa-angle-down"></i></h3>
                        <div class="collapsor">
                            <near-liste></near-liste>
                        </div>
                    </div>
                </div>

                <div ng-if="result.properties.web_links[0]" class="going-further">
                    <h3><i class="fa fa-info"></i>{{ 'KNOW_MORE' | translate}}</h3>
                    <ul ng-if="result.properties.web_links[0]" class="websites">
                        <li ng-repeat="link in result.properties.web_links">
                            <a href="{{link.url}}" title="{{link.name}}">
                                <img ng-if="link.category.pictogram && !isSVG(link.category.pictogram)" ng-src="{{link.category.pictogram}}" ng-alt="{{link.category.label}}">
                                <ng-include ng-if="link.category.pictogram && isSVG(link.category.pictogram)" src="link.category.pictogram"></ng-include>
                                <span>{{link.name}}</span>
                            </a>
                        </li>
                    </ul>
                </div>

            </div>
        </div>

    </div>

    <div class="detail-map" ng-class="{'no-interests': pois.length <= 0 && result.properties.touristic_contents.length >= 0 && result.properties.touristic_events.length >= 0 && result.properties.treks.length <= 0}">
        <geotrek-map></geotrek-map>
    </div>
</section>