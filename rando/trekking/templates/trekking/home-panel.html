{% load i18n leaflet_tags %}

<script type="text/javascript">
    function mainmapInit(map, bounds) {
        map.fitBounds([
            [{{ settings.map.extent.1 }}, {{ settings.map.extent.0 }}],
            [{{ settings.map.extent.3 }}, {{ settings.map.extent.2 }}]
        ]);

        // Move controls to the right
        map.zoomControl.setPosition('topright');
        map.addControl(new L.Control.Scale({imperial: false, position: 'bottomright'}));
        var treksLayer = new L.GeoJSON(treks);
        treksLayer.addTo(map);
    }
</script>

{% include "trekking/navigation_fragment.html" %}




<div id="show-side-bar" style="display: none"></div>
<div class="side-bar" id="side-bar">

  <div id="text-search" class="search1">
    <div class="span4">
      <div class="control-group">
        <div class="controls">
          <div class="input-prepend"> <span class="add-on"> <i class="icon-search"></i> </span>
            <input type="search" class="span3" placeholder="{% trans "Name, Valley, ..."%}" name="search" id="search"/>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="result-backpack-tabs" class="tabbable"> 
    <ul class="nav nav-tabs">
      <li id="tab-results" class="active">
        <div class="nb_res"> 7 </div>
        <a href="#results-pane">{% trans "Results" %}</a>
      </li>
      <li id="tab-backpack">
        <div class="nb_sac"> 7 </div>
        <a href="#backpack-pane">{% trans "Backpack" %}</a>
      </li>
      <li id="tab-showhidepanel">
        <a id="hide-side-bar" href="#" data-toggle="tab">.</a>
      </li>
    </ul>

    <div id="result-backpack-content" class="tab-content">
      <div class="tab-pane active" id="results-pane">
        {% for trek in treks %}
            {% include "trekking/trek_result_fragment.html" %}
        {% endfor %}
      </div>

      <div class="tab-pane" id="backpack-pane">
        {% for trek in treks %}
            {% include "trekking/trek_result_fragment.html" %}
        {% endfor %}
      </div>
    </div>
  </div>

</div>
<!-- sidebar -->



{% leaflet_map 'mainmap' fitextent=False creatediv=False %}

<div id="mainmap-tag" style="display: none"><!-- custom tag to detect loaded page--></div>