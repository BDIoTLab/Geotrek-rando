{% load i18n static leaflet_tags compress %}
<!DOCTYPE html>
<html>
<head>
    <!-- VERSION : {{ VERSION }} -->
    {% block head %}
    <title>{% block title %}{{ settings.title }}{% endblock title %}</title>
    {% leaflet_css %}

    <!-- fav and touch icons -->
    <link rel="shortcut icon" href="{% static "ico/favicon.ico" %}">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
        <script src="{% static "js/html5.js" %}"pt>
    <![endif]-->
    {% compress css %}
    <link href="{% static "css/bootstrap.css" %}" rel="stylesheet">
    <link href="{% static "css/bootstrap-responsive.css" %}" rel="stylesheet">
    <link type="text/css" href="{% static "js/jscrollpane/jquery.jscrollpane.css" %}" rel="stylesheet" media="all" />
    <link rel="stylesheet" href="{% static "css/jquery-ui.css" %}" />
    <link rel="stylesheet" href="{% static "css/style.css" %}" />
    {% endcompress %}

    {% endblock head %}
    {% block extrahead %}
    {% endblock extrahead %}
</head>
<body>
  <div id="top-panel" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <div class="nav-collapse">
          <a href="{% url trekking:home %}"><h3>{{ settings.title|default:"Trekking" }}</h3></a>
        </div>
        <!--/.nav-collapse --> 
      </div>
      <!--/.container -->

      <a class="btn" id="global-share" href="">{% trans "Share" %}</a> </div>


      <div id="search-bar">
        <a id="show-filters" href="#" class="show-hide-filters"></a> 
        <a id="hide-filters" href="#" class="show-hide-filters" style="display: none"></a>

        <p class="title">{% trans "Filters" %}</p>

        <div id="basic-filters">
          <div class="stage">
            <label>{% trans "Difficulty" %}</label>
            <img src="{% static "img/slider-stage.png" %}">
            <div id="stage" data-filter="stage"></div>
            <div class="slider-value first">{% trans "Easy" %}</div>
            <div class="slider-value">{% trans "Medium" %}</div>
            <div class="slider-value last">{% trans "Hard" %}</div>
          </div>
          <div class="time">
            <label>{% trans "Duration" %}</label>
            <img src="{% static "img/slider-time.png" %}">
            <div id="time" data-filter="time"></div>
            <div class="slider-value first">{% trans "Short" %}</div>
            <div class="slider-value">1/2</div>
            <div class="slider-value">{% trans "day" %}</div>
            <div class="slider-value">{% trans "2 days" %}</div>
            <div class="slider-value last">&gt;{% trans "2 days" %}</div>
          </div>
          <div class="den">
            <label>{% trans "Climb" %}</label>
            <img src="{% static "img/slider-den.png" %}">
            <div id="den" data-filter="den"></div>
            <div class="slider-value first">&lt; 200m</div>
            <div class="slider-value">200-700m</div>
            <div class="slider-value">700-1000m</div>
            <div class="slider-value last">&gt;1000m</div>
          </div>

          <div class="theme">
            <label>{% trans "Thematic" %}</label>
            {% for theme in themes %}
            <div class="theme-icon">
              <div class="filter-theme" id="theme-{{ theme.id }}" data-id="{{ theme.id }}" data-filter="theme"
                style="background-image: url(data:{{ theme.pictogram }})">
              </div>
              <p>{{ theme.label }}</p>
            </div>
            {% endfor %}
          </div>
        </div>

        <div id="advanced-filters" style="display: none">
          <div class="filter-bloc usage">
            <label>{% trans "Usage" %}</label>

            {% for usage in usages %}
            <div class="usage-icon">
              <div class="filter-usage" id="usage-{{ usage.id }}" data-id="{{ usage.id }}" data-filter="usage"
                   style="background-image: url(data:{{ usage.pictogram }})">
              </div>
              <p>{{ usage.label }}</p>
            </div>
            {% endfor %}
          </div>

          <div class="filter-bloc vallee">
            <label>{% trans "Valley" %}</label>
            <div class="btn-group">
              {% for district in districts %}
               <button class="bullet btn" data-id="{{ district.id }}" id="district-{{ district.id }}" data-filter="valle">{{ district.name }}</button>
              {% endfor %}
            </div>
          </div>

          <div class="filter-bloc cities">
            <label>{% trans "City" %}</label>
            <div class="btn-group">
              {% for city in cities %}
               <button class="bullet btn" data-id="{{ city.code|floatformat }}" id="city-{{ city.code }}" data-filter="city">{{ city.name }}</button>
              {% endfor %}
            </div>
          </div>

          <div class="filter-bloc access">
            <label>{% trans "Accessibility" %}</label>
            <div class="btn-group" data-toggle="buttons-checkbox">
              <button class="bullet btn" id="f" data-filter="access"> Fauteuil roulant </button>
              <button class="bullet btn" id="p" data-filter="access"> Poussette </button>
            </div>
          </div>

          <div class="filter-bloc boucle">
            <label>{% trans "Loop" %}</label>
            <label class="checkbox">
              <input type="checkbox" data-filter="boucle" id="boucle">
            </label>
          </div>
        </div>
        <!--  advanced-filters-->

      </div>
      <!--  search-bar-->
    </div>
    <!--  navbar-inner-->
  </div>
  <!-- navbar-->

  <div class="container" id="container-content">

    <div id="mainmap"></div>

    <div id="content">
        {% block content %}
        {% endblock content %}
    </div>

  </div>
  <!-- container -->

  <footer id="bottom-panel" class="footer">
    <div class="row-footer"> <a href="#">
      <div class="part1"></div>
      </a> <a href="#">
      <div class="part2"></div>
      </a> <a href="#">
      <div class="part3"></div>
      </a> <a href="#">
      <div class="part4"></div>
      </a> <a href="#">
      <div class="part5"></div>
      </a> <a href="#">
      <div class="part6"></div>
      </a> <a href="#">
      <div class="part7"></div>
      </a> <a href="#">
      <div class="part8"></div>
      </a> <a href="#">
      <div class="part9"></div>
      </a> <a href="#">
      <div class="part10"></div>
      </a> <a href="#">
      <div class="part11"></div>
      </a> <a href="#">
      <div class="part12"></div>
      </a>
    </div>
  </footer>

  {% compress js %}
  <script src="{% static "js/jquery.min.js" %}" type="text/javascript"></script>
  <script src="{% static "js/jquery-ui.js" %}"></script>
  <script src="{% static "js/jquery.sparkline.min.js" %}"></script>
  <script src="{% static "js/jscrollpane/jquery.jscrollpane.min.js" %}" type="text/javascript"></script>
  <script src="{% static "js/jscrollpane/jquery.mousewheel.js" %}"></script>
  <script src="{% static "js/jquery.pjax.js" %}"></script>
  {% leaflet_js %}
  <script src="{% static "js/bootstrap.min.js" %}"></script>
  <script src="{% static "js/leaflet-objectslayer.js" %}"></script>
  <script src="{% static "js/rtree.js" %}"></script>

  <script src="{% static "js/application/ui.js" %}"></script>
  <script src="{% static "js/application/filter.js" %}"></script>
  <script src="{% static "js/application/backpack.js" %}"></script> 
  <script src="{% static "js/application/map.js" %}"></script> 
  {% endcompress %}


  <script type="text/javascript">

      /*
       * A bunch of globals \o/
       */
      var trekFilter = null,
          backPack = null,
          treksLayer = null,
          treks = {{ treksjson|safe }};

      $(document).ready(function (e) {
          init_ui();
          page_load();
      });

      $(document).on('pjax:end', function (e) {
          page_load();
          // Try a custom lazy load
          var mainmapContainer = L.DomUtil.get('mainmap');
          if (mainmapContainer && typeof(loadmapmainmap) == "function") {
              if (!mainmapContainer._leaflet) loadmapmainmap();
          }
          var detailmapContainer = L.DomUtil.get('detailmap');
          if (detailmapContainer && typeof(loadmapdetailmap) == "function") {
              if (!detailmapContainer._leaflet) loadmapdetailmap();
          }
      });
  </script>

</body>
</html>
