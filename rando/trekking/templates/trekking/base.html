{% load i18n static leaflet_tags %}
<!DOCTYPE html>
<html>
<head>
    {% block head %}
    <title>{% block title %}{{ settings.title }}{% endblock title %}</title>
    {% leaflet_css %}

    <!-- fav and touch icons -->
    <link rel="shortcut icon" href="{% static "ico/favicon.ico" %}">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
        <script src="{% static "js/html5.js" %}"pt>
    <![endif]-->
    <link href="{% static "css/bootstrap.css" %}" rel="stylesheet">
    <link href="{% static "css/bootstrap-responsive.css" %}" rel="stylesheet">
    <link type="text/css" href="{% static "js/jscrollpane/jquery.jscrollpane.css" %}" rel="stylesheet" media="all" />
    <link rel="stylesheet" href="{% static "css/jquery-ui.css" %}" />
    <link rel="stylesheet" href="{% static "css/style.css" %}" />

    {% endblock head %}
    {% block extrahead %}
    {% endblock extrahead %}
</head>
<body>
  <div id="top-panel" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
        </a>
        <div class="nav-collapse">
          <a href="{% url trekking:home %}"><div class="logo"></div><a/>
          <h3>{{ settings.title }}</h3>
        </div>
        <!--/.nav-collapse --> 
      </div>
      <!--/.container -->

      <a class="btn" id="global-share" href="">{% trans "Share" %}</a> </div>


      <div id="search-bar">
        <a id="show-filters" href="#" class="show-hide-filters"></a> 
        <a id="hide-filters" href="#" class="show-hide-filters" style="display: none"></a>

        <p class="title">{% trans "Filters" %}</p>

        <div id="basic-filters">
          <div class="stage">
            <label>{% trans "Difficulty" %}</label>
            <img src="{% static "img/slider-stage.png" %}">
            <div id="stage" data-filter="stage"></div>
            <div class="slider-value first">Facile</div>
            <div class="slider-value">Confirmé</div>
            <div class="slider-value last">Sportif</div>
          </div>
          <div class="time">
            <label>{% trans "Duration" %}</label>
            <img src="{% static "img/slider-time.png" %}">
            <div id="time" data-filter="time"></div>
            <div class="slider-value first">Courte</div>
            <div class="slider-value">1/2</div>
            <div class="slider-value">journée</div>
            <div class="slider-value">2 jours</div>
            <div class="slider-value last">&gt;2 jours</div>
          </div>
          <div class="den">
            <label>{% trans "Climb" %}</label>
            <img src="{% static "img/slider-den.png" %}">
            <div id="den" data-filter="den"></div>
            <div class="slider-value first">&lt; 200 m</div>
            <div class="slider-value">200-700 m</div>
            <div class="slider-value">700-1000 m</div>
            <div class="slider-value last">&gt;1000 m</div>
          </div>

          <div class="theme">
            <label>{% trans "Thematic" %}</label>
            <div class="theme-icon">
              <button class="btn filter-theme" id="cols" data-filter="theme" data-toggle="button"></button>
              <p>Cols</p>
            </div>
            <div class="theme-icon">
              <button class="btn filter-theme" id="sommet" data-filter="theme" data-toggle="button"></button>
              <p>Sommets</p>
            </div>
            <div class="theme-icon">
              <button class="btn filter-theme" id="refug" data-filter="theme" data-toggle="button"></button>
              <p>Refuges</p>
            </div>
            <div class="theme-icon">
              <button class="btn filter-theme" id="flore" data-filter="theme" data-toggle="button"></button>
              <p>Flaure</p>
            </div>
            <div class="theme-icon">
              <button class="btn filter-theme" id="faune" data-filter="theme" data-toggle="button"></button>
              <p>Faune</p>
            </div>
            <div class="theme-icon">
              <button class="btn filter-theme" id="patr" data-filter="theme" data-toggle="button"></button>
              <p>Patrimoine</p>
            </div>
            <div class="theme-icon">
              <button class="btn filter-theme" id="lacs" data-filter="theme" data-toggle="button"></button>
              <p>Lacs</p>
            </div>
          </div>
        </div>

        <div id="advanced-filters" style="display: none">
          <div class="filter-bloc usage">
            <label>{% trans "Usage" %}</label>
            <div class="usage-icon">
              <button class="btn filter-usage" id="velo" data-filter="usage" data-toggle="button"></button>
              <p>vélo</p>
            </div>
            <div class="usage-icon">
              <button class="btn filter-usage" id="vtt" data-filter="usage" data-toggle="button"></button>
              <p>VTT</p>
            </div>
            <div class="usage-icon">
              <button class="btn filter-usage" id="cheval" data-filter="usage" data-toggle="button"></button>
              <p>Cheval</p>
            </div>
          </div>
          <div class="filter-bloc vallee">
            <label>{% trans "Valley" %}</label>
            <div class="btn-group" data-toggle="buttons-checkbox">
              <button class="bullet btn" id="Brianconnais" data-filter="valle"> Le Briançoannais </button>
              <button class="bullet btn" id="Champsaur" data-filter="valle"> Le Champseur </button>
              <button class="bullet btn" id="Embrunais" data-filter="valle"> L'Embrunais </button>
              <button class="bullet btn" id="Oisans" data-filter="valle"> L'Oisan vertical </button>
              <button class="bullet btn" id="Valbonnais" data-filter="valle"> Le Valbonnais </button>
              <button class="bullet btn" id="vallouise"data-filter="valle"> La Vallouise </button>
              <button class="bullet btn" id="Valgaudemar" data-filter="valle"> Le Valgaudemar </button>
            </div>
          </div>
          <div class="filter-bloc access">
            <label>{% trans "Accessibility" %}</label>
            <div class="btn-group" data-toggle="buttons-checkbox">
              <button class="bullet btn" id="f" data-filter="access"> Fauteuil roulant </button>
              <button class="bullet btn" id="p" data-filter="access"> Poussette </button>
            </div>
          </div>
          <div class="filter-bloc boucle">
            <label>{% trans "Loop" %}</label>
            <label class="checkbox">
              <input type="checkbox" data-filter="boucle" id="boucle">
            </label>
          </div>
        </div>
        <!--  advanced-filters-->

      </div>
      <!--  search-bar-->
    </div>
    <!--  navbar-inner-->
  </div>
  <!-- navbar-->

  <div class="container" id="container-content">

    <div id="mainmap"></div>

    <div id="content">
        {% block content %}
        {% endblock content %}
    </div>

  </div>
  <!-- container -->

  <footer id="bottom-panel" class="footer">
    <div class="row-footer"> <a href="#">
      <div class="part1"></div>
      </a> <a href="#">
      <div class="part2"></div>
      </a> <a href="#">
      <div class="part3"></div>
      </a> <a href="#">
      <div class="part4"></div>
      </a> <a href="#">
      <div class="part5"></div>
      </a> <a href="#">
      <div class="part6"></div>
      </a> <a href="#">
      <div class="part7"></div>
      </a> <a href="#">
      <div class="part8"></div>
      </a> <a href="#">
      <div class="part9"></div>
      </a> <a href="#">
      <div class="part10"></div>
      </a> <a href="#">
      <div class="part11"></div>
      </a> <a href="#">
      <div class="part12"></div>
      </a>
    </div>
  </footer>

  <script src="{% static "js/jquery.min.js" %}" type="text/javascript"></script>
  <script src="{% static "js/jquery-ui.js" %}"></script>
  <script src="{% static "js/jquery.sparkline.min.js" %}"></script>
  <script src="{% static "js/jscrollpane/jquery.jscrollpane.min.js" %}" type="text/javascript"></script>
  <script src="{% static "js/jscrollpane/jquery.mousewheel.js" %}"></script>
  <script src="{% static "js/jquery.pjax.js" %}"></script>
  {% leaflet_js %}
  <script src="{% static "js/bootstrap.min.js" %}"></script>

  <script src="{% static "js/application/ui.js" %}"></script>
  <script src="{% static "js/application/filter.js" %}"></script>
  <script src="{% static "js/application/map.js" %}"></script> 


  <script type="text/javascript">

      /*
       * A bunch of globals \o/
       */
      var store = null,
          treks = {{ treksjson|safe }};

      $(document).ready(function (e) {
          init_ui();
          page_load();
      });

      $(document).on('pjax:end', function (e) {
          page_load();
          // Try a custom lazy load
          var mainmapContainer = L.DomUtil.get('mainmap');
          if (mainmapContainer && typeof(loadmapmainmap) == "function") {
              if (!mainmapContainer._leaflet) loadmapmainmap();
          }
          var detailmapContainer = L.DomUtil.get('detailmap');
          if (detailmapContainer && typeof(loadmapdetailmap) == "function") {
              if (!detailmapContainer._leaflet) loadmapdetailmap();
          }
      });
  </script>

</body>
</html>
